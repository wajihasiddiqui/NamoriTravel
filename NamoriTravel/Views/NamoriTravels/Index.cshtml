@{
    Layout = "~/Views/Shared/_Layout_Client.cshtml";
}
<style>
.button-grid {
    display: flex !important;
    align-items: center!important; /* Vertically center the items */
    flex-wrap: nowrap!important; /* Prevent items from wrapping */
    gap: 20px!important; /* Space between items */
}

.searchMenu-loc,
.searchMenu-date,
.searchMenu-guests {
    flex: 1!important; /* Allow items to grow equally */
}

.mainSearch__submit {
    flex-shrink: 0!important; /* Prevent the button from shrinking */
}
.mainSearch.-w-900 {
    width: 1000px !important;
}
</style>
<!-- ------------------------ content Section ------------------------------------ -->
<section data-anim-wrap class="masthead -type-2 js-mouse-move-container">
    <div class="masthead__bg bg-dark-3">
        <img src="~/dashboard/img/masthead/2/bg.png" alt="image">
    </div>

    <div class="container">
        <!-- //---------------- If in Futhure we add more categories then we use tab here Like hotel , car , Flight -----------// -->
        <div class="masthead__content">
            <div class="row y-gap-40">
                <div class="col-xl-5">
                    <h1 data-anim-child="slide-up delay-2" class="z-2 text-60 lg:text-40 md:text-30 text-white pt-80 xl:pt-0">
                        <span class="text-yellow-1">Where Would</span><br>
                        You Like To Go?
                    </h1>

                    <p data-anim-child="slide-up delay-3" class="z-2 text-white mt-20">Checkout Beautiful Places Arround the World.</p>

                    <div data-anim-child="slide-up delay-4" class="mainSearch -w-900 z-2 bg-white pr-10 py-10 lg:px-20 lg:pt-5 lg:pb-20 rounded-4 shadow-1 mt-40">
                        <div class="button-grid items-center">
                          
                            <!-- Country Dropdown -->
            <div class="searchMenu-loc px-15 lg:py-20 lg:px-0 js-form-dd js-liverSearch">
               
          <div data-x-dd-click="searchMenu-country">
            <h4 class="text-15 fw-500 ls-2 lh-16">Country</h4>

            <div class="text-15 text-light-1 ls-2 lh-16">
                <input autocomplete="off" type="search" placeholder="Where are you going?" class="js-search js-dd-focus" />
            </div>
        </div>
        <div class="searchMenu-loc__field shadow-2 js-popup-window" data-x-dd="searchMenu-country" data-x-dd-toggle="-is-active">
            <div class="bg-white px-30 py-30 sm:px-0 sm:py-15 rounded-4">
                <div class="y-gap-5 js-results">
                   <div id="countryList"></div>
			   </div>
            </div>
        </div>


    </div>

    <!-- City Dropdown -->
    <div class="searchMenu-loc px-15 lg:py-20 lg:px-0 js-form-dd js-liverSearchCity">
        <div data-x-dd-click="searchMenu-city">
            <h4 class="text-15 fw-500 ls-2 lh-16">City</h4>

            <div class="text-15 text-light-1 ls-2 lh-16">
                <input autocomplete="off" type="search" placeholder="Which city are you going to?" class="js-search citysearch js-dd-focus" />
            </div>
        </div>
        <div class="searchMenu-loc__field shadow-2 js-popup-window" data-x-dd="searchMenu-city" data-x-dd-toggle="-is-active">
            <div class="bg-white px-30 py-30 sm:px-0 sm:py-15 rounded-4">
                <div class="y-gap-5 js-results">
                     <div id="countryList"></div>
                     <div id="city-list">
                   
                    </div>
                </div>
            </div>
        </div>
    </div>

                           
                            <div class="searchMenu-date px-30 lg:py-10 lg:px-0 js-form-dd js-calendar js-calendar-el">

                                <div data-x-dd-click="searchMenu-date">
                                    <h4 class="text-15 fw-500 ls-2 lh-16">Check in - Check out</h4>

                                    <div class="capitalize text-15 text-light-1 ls-2 lh-16">
                                        <span class="js-first-date">Wed 2 Mar</span>
                                        -
                                        <span class="js-last-date">Fri 11 Apr</span>
                                    </div>
                                </div>


                                <div class="searchMenu-date__field shadow-2" data-x-dd="searchMenu-date" data-x-dd-toggle="-is-active">
                                    <div class="bg-white px-30 py-30 rounded-4">
                                        <div class="elCalendar js-calendar-el-calendar"></div>
                                    </div>
                                </div>
                            </div>


                            <div class="searchMenu-guests px-15 lg:py-210 lg:px-0 js-form-dd js-form-counters">

                                <div data-x-dd-click="searchMenu-guests">
                                    <h4 class="text-15 fw-500 ls-2 lh-16">Guest</h4>

                                    <div class="text-15 text-light-1 ls-2 lh-16">
                                        <span class="js-count-adult">2</span> adults
                                        -
                                        <span class="js-count-child">1</span> childeren
                                        -
                                        <span class="js-count-room">1</span> room
                                    </div>
                                </div>


                                <div class="searchMenu-guests__field shadow-2" data-x-dd="searchMenu-guests" data-x-dd-toggle="-is-active">
                                    <div class="bg-white px-30 py-30 rounded-4">
                                        <div class="row y-gap-10 justify-between items-center">
                                            <div class="col-auto">
                                                <div class="text-15 fw-500">Adults</div>
                                            </div>

                                            <div class="col-auto">
                                                <div class="d-flex items-center js-counter" data-value-change=".js-count-adult">
                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-down">
                                                        <i class="icon-minus text-12"></i>
                                                    </button>

                                                    <div class="flex-center size-20 ml-15 mr-15">
                                                        <div class="text-15 js-count">2</div>
                                                    </div>

                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-up">
                                                        <i class="icon-plus text-12"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-top-light mt-24 mb-24"></div>

                                        <div class="row y-gap-10 justify-between items-center">
                                            <div class="col-auto">
                                                <div class="text-15 lh-12 fw-500">Children</div>
                                                <div class="text-14 lh-12 text-light-1 mt-5">Ages 0 - 17</div>
                                            </div>

                                            <div class="col-auto">
                                                <div class="d-flex items-center js-counter" data-value-change=".js-count-child">
                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-down">
                                                        <i class="icon-minus text-12"></i>
                                                    </button>

                                                    <div class="flex-center size-20 ml-15 mr-15">
                                                        <div class="text-15 js-count">1</div>
                                                    </div>

                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-up">
                                                        <i class="icon-plus text-12"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-top-light mt-24 mb-24"></div>

                                        <div class="row y-gap-10 justify-between items-center">
                                            <div class="col-auto">
                                                <div class="text-15 fw-500">Rooms</div>
                                            </div>

                                            <div class="col-auto">
                                                <div class="d-flex items-center js-counter" data-value-change=".js-count-room">
                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-down">
                                                        <i class="icon-minus text-12"></i>
                                                    </button>

                                                    <div class="flex-center size-20 ml-15 mr-15">
                                                        <div class="text-15 js-count">1</div>
                                                    </div>

                                                    <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-up">
                                                        <i class="icon-plus text-12"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="button-item">
                                <button class="mainSearch__submit button -dark-1 py-15 px-35 h-60 col-12 rounded-4 bg-yellow-1 text-dark-1">
                                    <i class="icon-search text-20 mr-10"></i>
                                    Search
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-7">
                    <div class="masthead__images">
                        <div data-anim-child="slide-up delay-6"><img src="~/dashboard/img/masthead/2/1.png" alt="image" class="js-mouse-move" data-move="30"></div>
                        <div data-anim-child="slide-up delay-7"><img src="~/dashboard/img/masthead/2/2.png" alt="image" class="js-mouse-move" data-move="40"></div>
                        <div data-anim-child="slide-up delay-8"><img src="~/dashboard/img/masthead/2/3.png" alt="image" class="js-mouse-move" data-move="50"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ------------------------ content Section  END------------------------------------ -->
@section Scripts{
<script>
 // Search functionality
    var CityCode="";

    $('.citysearch').on('input', function () {
        var searchTerm = $(this).val().toLowerCase();
        var filteredCities = cities.filter(city => city.name.toLowerCase().includes(searchTerm));
        populateCityList(filteredCities);
    });

    $(document).on('click', '.getcity', function () {
        var selectedCityCode = $(this).find('.citycode').text();
        CityCode = selectedCityCode.split(',')[0];
        var selectedCityName = $(this).find('.city').text();
        $('.citysearch').val(selectedCityCode); // Set the input field with the city name

    });

document.querySelector('.mainSearch__submit').addEventListener('click', function (e) {
    e.preventDefault(); // Prevent default form submission
    searchHotels(); // Call the searchHotels function
});

function searchHotels() {
    
    let currencyMainTitle = document.querySelector('.js-currencyMenu-mainTitle');
    // Get the data-value attribute
    let currencyValue = currencyMainTitle.getAttribute('data-value');
    
    // Get check-in and check-out dates
    let checkInDate = document.querySelector('.js-first-date').textContent;
    let checkOutDate = document.querySelector('.js-last-date').textContent;
    // Get guests data
    let adults = document.querySelector('.js-count-adult').textContent;
    let children = document.querySelector('.js-count-child').textContent;
    let rooms = document.querySelector('.js-count-room').textContent;

    // Prepare API parameters
    let searchParams = {
        City: CityCode,
        Currency:currencyValue,
        Ratebasis: "-1",
        FromDate: checkInDate,
        ToDate: checkOutDate,
        Adults: adults,
        Children: children,
        Rooms: rooms,
        Page:"1",
        PageSize:"10"
    };

    console.log("Search Parameters:", searchParams);
    var basePath = window.location.origin;
    $.ajax({
            type: 'GET',
            url: basePath + '/NamoriTravels/SearchHotel',
            data: {DTO:JSON.stringify(searchParams)},
            success: function (response) {
                if (response.redirectUrl) {
            window.location.href = response.redirectUrl; // Redirect the user to the new page
        } else {
            // Handle other success scenarios
            Alerts.showSuccessMessage("");
        }
            },
            error: function (xhr, status, error) {
                  Alerts.showErrorMessage("");
                console.error("Error: ", status, error);
            }
        });
}
</script>
}